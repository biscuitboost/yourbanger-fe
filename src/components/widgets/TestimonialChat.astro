---
interface Testimonial {
  message: string;
  name: string;
  align?: 'left' | 'right';
}

interface Props {
  testimonials: Testimonial[];
  class?: string;
}

const { testimonials, class: className = '' } = Astro.props;
---

<div class={`testimonial-chat space-y-4 ${className}`}>
  {
    testimonials.map((testimonial, index) => {
      const align = testimonial.align || (index % 2 === 0 ? 'left' : 'right');
      return (
        <div class={`flex ${align === 'right' ? 'justify-end' : 'justify-start'}`}>
          <div class="max-w-xs md:max-w-md">
            <div
              class={`rounded-2xl px-4 py-3 shadow-md ${
                align === 'right'
                  ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-br-sm'
                  : 'bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-sm'
              }`}
            >
              <p class="text-sm md:text-base">{testimonial.message}</p>
            </div>
            <p
              class={`text-xs text-gray-600 dark:text-gray-400 mt-1 ${
                align === 'right' ? 'text-right' : 'text-left'
              }`}
            >
              {testimonial.name}
            </p>
          </div>
        </div>
      );
    })
  }
</div>
